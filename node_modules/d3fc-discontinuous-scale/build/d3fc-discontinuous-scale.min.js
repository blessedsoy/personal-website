!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-scale"),require("d3fc-rebind"),require("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-scale","d3fc-rebind","d3-time"],t):t(n.fc=n.fc||{},n.d3,n.fc,n.d3)}(this,function(n,t,e,r){"use strict";function i(n,t,e){var r=n.map(function(n){return[t(n),n]}),i=function(n){return n instanceof Date?n.getTime():n},o=r.reduce(function(n,t){return 0===n.filter(function(n){return i(n[0])===i(t[0])}).length&&n.push(t),n},[]);return o.map(function(n){return n[1]})}function o(n){var r=this;arguments.length||(n=t.scaleIdentity());var c=u(),f=function(t){var e=n.domain(),r=n.range(),i=c.distance(e[0],e[1]),o=c.distance(e[0],t),u=o/i,f=u*(r[1]-r[0])+r[0];return f};return f.invert=function(t){var e=n.domain(),r=n.range(),i=(t-r[0])/(r[1]-r[0]),o=c.distance(e[0],e[1]),u=i*o;return c.offset(e[0],u)},f.domain=function(){if(!arguments.length)return n.domain();var t=arguments.length<=0?void 0:arguments[0],e=c.clampUp(t[0]),r=c.clampDown(t[1]);return n.domain([e,r]),f},f.nice=function(){n.nice();var t=n.domain(),e=c.clampUp(t[0]),r=c.clampDown(t[1]);return n.domain([e,r]),f},f.ticks=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];var u=n.ticks.apply(r,e);return i(u,f,f.domain())},f.copy=function(){return o(n.copy()).discontinuityProvider(c.copy())},f.discontinuityProvider=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],f):c},e.rebindAll(f,n,e.include("range","rangeRound","interpolate","clamp","tickFormat")),f}var u=function(){var n={};return n.distance=function(n,t){return t-n},n.offset=function(n,t){return n instanceof Date?new Date(n.getTime()+t):n+t},n.clampUp=function(n){return n},n.clampDown=function(n){return n},n.copy=function(){return n},n},c=function(){var n=864e5,t=5*n,e=7*n,i={},o=function(n){return 0===n.getDay()||6===n.getDay()};return i.clampDown=function(n){if(n&&o(n)){var t=0===n.getDay()?2:1,e=r.timeDay.ceil(n);return r.timeDay.offset(e,-t)}return n},i.clampUp=function(n){if(n&&o(n)){var t=0===n.getDay()?1:2,e=r.timeDay.floor(n);return r.timeDay.offset(e,t)}return n},i.distance=function(n,o){n=i.clampUp(n),o=i.clampDown(o);var u=r.timeSaturday.ceil(n);if(o<u)return o.getTime()-n.getTime();var c=u.getTime()-n.getTime(),f=r.timeSaturday.ceil(o),a=f.getTime()-o.getTime(),l=Math.round((f.getTime()-u.getTime())/e);return l*t+c-a},i.offset=function(n,e){var u=o(n)?i.clampUp(n):n;if(0===e)return u;var c=e<0,f=e>0,a=e,l=c?r.timeMonday.floor(u):r.timeSaturday.ceil(u);if(a-=l.getTime()-u.getTime(),c&&a>0||f&&a<0)return new Date(u.getTime()+e);u=c?l:r.timeDay.offset(l,2);var m=Math.floor(a/t);return u=r.timeDay.offset(u,7*m),a-=m*t,u=new Date(u.getTime()+a)},i.copy=function(){return i},i},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},a=(function(){function n(n){this.value=n}function t(t){function e(n,t){return new Promise(function(e,i){var c={key:n,arg:t,resolve:e,reject:i,next:null};u?u=u.next=c:(o=u=c,r(n,t))})}function r(e,o){try{var u=t[e](o),c=u.value;c instanceof n?Promise.resolve(c.value).then(function(n){r("next",n)},function(n){r("throw",n)}):i(u.done?"return":"normal",u.value)}catch(n){i("throw",n)}}function i(n,t){switch(n){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}o=o.next,o?r(o.key,o.arg):u=null}var o,u;this._invoke=e,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(n){return this._invoke("next",n)},t.prototype.throw=function(n){return this._invoke("throw",n)},t.prototype.return=function(n){return this._invoke("return",n)},{wrap:function(n){return function(){return new t(n.apply(this,arguments))}},await:function(t){return new n(t)}}}(),function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];var r=function(n,t){return n>t[0]&&n<t[1]},i=function(n,t){return n[0]>=t[0]&&n[1]<=t[1]},o={};o.distance=function(n,e){n=o.clampUp(n),e=o.clampDown(e);var r=t.filter(function(t){return i(t,[n,e])}),u=r.map(function(n){return n[1]-n[0]});return e-n-u.reduce(function(n,t){return n+t},0)};var u=function(n,t){return n instanceof Date?new Date(n.getTime()+t):n+t};return o.offset=function(n,e){if(e>0){var r=function(){for(var r=o.clampUp(n),i=e;i>0;){var c=t.filter(function(n){return n[0]>r}).sort(function(n,t){return n[0]-t[0]});if(c.length){var f=c[0],a=f[0]-r;a>i?(r=u(r,i),i=0):(r=f[1],i-=a)}else r=u(r,i),i=0}return{v:r}}();if("object"===("undefined"==typeof r?"undefined":f(r)))return r.v}else{var i=function(){for(var r=o.clampDown(n),i=e;i<0;){var c=t.filter(function(n){return n[1]<r}).sort(function(n,t){return t[0]-n[0]});if(c.length){var f=c[0],a=f[1]-r;a<i?(r=u(r,i),i=0):(r=f[0],i-=a)}else r=u(r,i),i=0}return{v:r}}();if("object"===("undefined"==typeof i?"undefined":f(i)))return i.v}},o.clampUp=function(n){return t.reduce(function(n,t){return r(n,t)?t[1]:n},n)},o.clampDown=function(n){return t.reduce(function(n,t){return r(n,t)?t[0]:n},n)},o.copy=function(){return o},o});n.scaleDiscontinuous=o,n.discontinuitySkipWeekends=c,n.discontinuityIdentity=u,n.discontinuityRange=a,Object.defineProperty(n,"__esModule",{value:!0})});